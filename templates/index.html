<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <title>Minimaschine</title>

    <script language="javascript" type="text/javascript" src="https://codemirror.net/lib/codemirror.js"></script>
    <link rel="stylesheet" type="text/css" href="https://codemirror.net/lib/codemirror.css"></link>
    <link rel="stylesheet" href="http://codemirror.net/theme/night.css">

    <link rel="stylesheet" type="text/css" href="static\site.css"></link>

</head>
<body>

    <div class="row">
        <div class="column-left">
            <form action="{{ url_for('submit') }}" method="post" class="input_form">
                <textarea name="text" id="code"></textarea>
                <input type="submit" class="submit_button" value="Run Code">
            </form>
        </div>
    
        <div class="column-right">

            <div class="cpu-graphic">
                <div class="cpu-graphic-inside">
                    <div class="Akkumulator">
                        <p>
                            Akkumulator 
                        </p>
                        <div class="Akkumulator-Wert">
                            {{ akkumulator|default("0", true)}}
                        </div>
                    </div>

                    <div class="Befehlsregister">
                        <p>
                            Befehlsregister
                        </p>
                        <div class="Befehlsregister-Ausgabe">
                            <div class="Befehlsregister-Befehl">
                                {{ befehlsregister_key|default("----", true) }}
                            </div>
                            <div class="Befehlsregister-Wert">
                                {{ befehlsregister_value|default("----", true) }}
                            </div>
                        </div>
                    </div>

                    <div class="Programmzähler">
                        <p>
                            Programmzähler
                        </p>
                        <div class="Programmzähler-Zähler">
                            {{ programmzähler|default("0", true) }}
                        </div>
                    </div>
                </div>
            </div>

            <table class="reg_table">

                <tr>
                    <th class="tg-reg">R1= {{ reg_1|default("0000000000000000",true) }}</th>
                    <th class="tg-reg">R2= {{ reg_2|default("0000000000000000",true) }}</th>
                </tr>
                <tr>
                    <td class="tg-reg">R3= {{ reg_3|default("0000000000000000",true) }}</td>
                    <td class="tg-reg">R4= {{ reg_4|default("0000000000000000",true) }}</td>
                </tr>
                <tr>
                    <td class="tg-reg">R5= {{ reg_5|default("0000000000000000",true) }}</td>
                    <td class="tg-reg">R6= {{ reg_6|default("0000000000000000",true) }}</td>
                </tr>
                <tr>
                    <td class="tg-reg">R7= {{ reg_7|default("0000000000000000",true) }}</td>
                    <td class="tg-reg">R8= {{ reg_8|default("0000000000000000",true) }}</td>
                </tr>

                <tr>
                    <td class="tg-flag">OV= {{ ov|default("0",true)}} </td> <!-- Overflow flag: 1->Overflowed 0->Didn't overflow-->
                    <td class="tg-flag">ZR= {{ zr|default("0",true)}} </td> <!-- Zero Flag: 1->Zero 0->Not Zero-->
                </tr>
                <tr>
                    <td class="tg-flag">SF= {{ sf|default("0",true)}} </td> <!-- Sign Flag: 1->Negative 0->Positive-->
                    <td class="tg-flag">PF= {{ pf|default("0",true)}} </td> <!-- Parity Flag: 1->Parity Even 0->Parity Odd-->
                </tr>
                </table>
            
            <div class="footer">
                <button class="buttons">Button</button>
                <button class="buttons">Button</button>
                <button class="buttons">Button</button>
                <button class="buttons">Button</button>
                <button class="buttons">Button</button>
            </div>

            <p class="copyright">
                &copy; Alexander Berlin & Ilyas Erriahi Q12 Spessart-Gymnasium-Alzenau 2022
            </p>
        </div>
    </div>
    <!-- +++++ JAVASCRIPT +++++ -->

    <!-- +++++ CODEMIRROR +++++-->
    <script>
        var editor = CodeMirror.fromTextArea(document.getElementById('code'), {
            lineNumbers: true,
            theme: "night"
        });
        editor.setSize(window.screen.width * 0.29,window.screen.height/1.2);
    </script>

    <!-- +++++ ENABLE TAB IN TEXTAREA +++++ -->
    <script>
        document.getElementById('textbox').addEventListener('keydown', function(e) {
        if (e.key == 'Tab') {
            e.preventDefault();
            var start = this.selectionStart;
            var end = this.selectionEnd;
            this.value = this.value.substring(0, start) +
            "\t" + this.value.substring(end);
            this.selectionStart = this.selectionEnd = start + 1;
            }
        });
    </script>
</body>
</html>